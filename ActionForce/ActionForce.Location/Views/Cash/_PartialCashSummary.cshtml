@model SummaryControlModel
@{
    /**/

    List<int> cashsales = new int[] { 10, 21, 24, 28 }.ToList();
    List<int> cashprocess = new int[] { 23, 27 }.ToList();
    List<int> cardsales = new int[] { 1, 3, 5 }.ToList();
    List<int> maas = new int[] { 3, 31 }.ToList();
    List<int> cashexpense = new int[] { 4, 29 }.ToList();
    List<int> cashexchange = new int[] { 25 }.ToList();
    List<int> bankeft = new int[] { 11, 30 }.ToList();
    var blockedamount = Model.CurrentCash.BlockedAmount?.ToString("N2");
    //var usdBlockedamount = (Model.CurrentCash.Currency == "USD" ? Model.CurrentCash.BlockedAmount : 0);
}
    <div class="table-responsive">
        <table class="table table-hover mb-0">
            <tbody>
                <tr class="bg-body">
                    <td>Kasa Parası (i)</td>
                    <td class="text-right"> @(Model.CurrentCash.Currency == "USD" ? $"{Model.CurrentCash.BlockedAmount?.ToString("N2")}" : "")</td>
                    <td class="text-right"> @(Model.CurrentCash.Currency == "EUR" ? $"{Model.CurrentCash.BlockedAmount?.ToString("N2")}" : "")</td>
                    <td class="text-right"> @(Model.CurrentCash.Currency == "TRL" ? $"{Model.CurrentCash.BlockedAmount?.ToString("N2")}" : "")</td>
                </tr>
                <tr>
                    <th></th>
                    <th class="text-right">$</th>
                    <th class="text-right">€</th>
                    <th class="text-right">₺</th>
                </tr>
                <tr class="bg-body">
                    <td class="p-2 text-danger">Kasa Deviri</td>
                    <td class="text-right p-2">@(Model.DevirTotal.Where(x => x.Currency == "USD").Sum(x => x.Total).ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.DevirTotal.Where(x => x.Currency == "EUR").Sum(x => x.Total).ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.DevirTotal.Where(x => x.Currency == "TRL").Sum(x => x.Total).ToString("N2"))</td>
                </tr>
                <tr class="bg-body">
                    <td class="p-2 text-danger">Ciro Deviri</td>
                    <td class="text-right p-2">@(Model.DevirTotal.Where(x => x.Currency == "USD").Sum(x => x.CiroTotal).ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.DevirTotal.Where(x => x.Currency == "EUR").Sum(x => x.CiroTotal).ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.DevirTotal.Where(x => x.Currency == "TRL").Sum(x => x.CiroTotal).ToString("N2"))</td>
                </tr>
                <tr>
                    <th colspan="4">Bugünkü</th>
                </tr>
                <tr>
                    <td class="p-2 text-info">Nakit Satış</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashsales.Contains(x.CashActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashsales.Contains(x.CashActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashsales.Contains(x.CashActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount)?.ToString("N2"))</td>
                </tr>
                <tr>
                    <td class="p-2 text-warning">Kredili Satış</td>
                    <td class="text-right p-2">@(Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount)?.ToString("N2"))</td>
                </tr>
                <tr>
                    <td class="p-2">Kasa İşlemi</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashprocess.Contains(x.CashActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashprocess.Contains(x.CashActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashprocess.Contains(x.CashActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount)?.ToString("N2"))</td>
                </tr>
                <tr>
                    <td class="p-2">İşçilik</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => maas.Contains(x.CashActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => maas.Contains(x.CashActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => maas.Contains(x.CashActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount)?.ToString("N2"))</td>
                </tr>
                <tr>
                    <td class="p-2">Masraf</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashexpense.Contains(x.CashActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashexpense.Contains(x.CashActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashexpense.Contains(x.CashActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount)?.ToString("N2"))</td>
                </tr>
                <tr>
                    <td class="p-2">Döviz</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashexchange.Contains(x.CashActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashexchange.Contains(x.CashActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => cashexchange.Contains(x.CashActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount)?.ToString("N2"))</td>
                </tr>
                <tr>
                    <td class="p-2">Havale / EFT</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => bankeft.Contains(x.CashActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => bankeft.Contains(x.CashActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.CashActions.Where(x => bankeft.Contains(x.CashActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount)?.ToString("N2"))</td>
                </tr>
                <tr class="table-info">
                    <td class="p-2"><b>Nakit Bakiye</b></td>
                    <td class="text-right p-2">@((Model.CashActions.Where(x => x.Currency == "USD").Sum(x => x.Amount))?.ToString("N2"))</td>
                    <td class="text-right p-2">@((Model.CashActions.Where(x => x.Currency == "EUR").Sum(x => x.Amount))?.ToString("N2"))</td>
                    <td class="text-right p-2">@((Model.CashActions.Where(x => x.Currency == "TRL").Sum(x => x.Amount))?.ToString("N2"))</td>
                </tr>
                <tr class="table-warning">
                    <td class="p-2"><b>Kart Bakiye</b></td>
                    <td class="text-right p-2">@(Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount)?.ToString("N2"))</td>
                    <td class="text-right p-2">@(Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount)?.ToString("N2"))</td>
                </tr>

                <tr class="bg-body">
                    <td class="p-2"><b>Toplam Bakiye</b></td>
                    <td class="text-right p-2">@((Model.CashActions.Where(x => x.Currency == "USD").Sum(x => x.Amount) + Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount))?.ToString("N2"))</td>
                    <td class="text-right p-2">@((Model.CashActions.Where(x => x.Currency == "EUR").Sum(x => x.Amount) + Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount))?.ToString("N2"))</td>
                    <td class="text-right p-2">@((Model.CashActions.Where(x => x.Currency == "TRL").Sum(x => x.Amount) + Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount))?.ToString("N2"))</td>
                </tr>
                <tr>
                    <th colspan="4">Genel Toplam</th>
                </tr>
                <tr>
                    <td class="bg-primary text-white"><b>Nakit</b></td>
                    <td class="text-right bg-primary text-white">@((Model.CashActions.Where(x => x.Currency == "USD").Sum(x => x.Amount) + Model.DevirTotal.Where(x => x.Currency == "USD").Sum(x => x.Total))?.ToString("N2"))</td>
                    <td class="text-right bg-primary text-white">@((Model.CashActions.Where(x => x.Currency == "EUR").Sum(x => x.Amount) + Model.DevirTotal.Where(x => x.Currency == "EUR").Sum(x => x.Total))?.ToString("N2"))</td>
                    <td class="text-right bg-primary text-white">@((Model.CashActions.Where(x => x.Currency == "TRL").Sum(x => x.Amount) + Model.DevirTotal.Where(x => x.Currency == "TRL").Sum(x => x.Total))?.ToString("N2"))</td>
                </tr>
                <tr>
                    <td class="bg-primary text-white"><b>Kasa</b></td>
                    <td class="text-right bg-primary text-white">@((Model.CashActions.Where(x => x.Currency == "USD").Sum(x => x.Amount) + Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "USD").Sum(x => x.Amount) + Model.DevirTotal.Where(x => x.Currency == "USD").Sum(x => x.Total))?.ToString("N2"))</td>
                    <td class="text-right bg-primary text-white">@((Model.CashActions.Where(x => x.Currency == "EUR").Sum(x => x.Amount) + Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "EUR").Sum(x => x.Amount) + Model.DevirTotal.Where(x => x.Currency == "EUR").Sum(x => x.Total))?.ToString("N2"))</td>
                    <td class="text-right bg-primary text-white">@((Model.CashActions.Where(x => x.Currency == "TRL").Sum(x => x.Amount) + Model.BankActions.Where(x => cardsales.Contains(x.BankActionTypeID.Value) && x.Currency == "TRL").Sum(x => x.Amount) + Model.DevirTotal.Where(x => x.Currency == "TRL").Sum(x => x.Total))?.ToString("N2"))</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <th></th>
                    <th class="text-right">$</th>
                    <th class="text-right">€</th>
                    <th class="text-right">₺</th>
                </tr>
                <tr>
                    <td colspan="4" class="text-muted">(i) Bilgi amaçlı verilmiştir, hesaba katılmaz.</td>
                </tr>
            </tfoot>

        </table>
    </div>

@if (Model.Result != null) //
{
    <script type="text/javascript">
        $.toast({
            heading: 'Information',
            text: '@Model.Result.Message ',
            showHideTransition: 'slide',
            icon: 'info',
            hideAfter: 5000,
            position: 'bottom-right',
        });
    </script>
}

