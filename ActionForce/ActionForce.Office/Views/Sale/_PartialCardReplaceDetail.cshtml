@model SaleControlModel


<div class="col-lg-12">
    <p>Siparişteki Kartı "@(Model.TicketSaleCreditLoad.CardNumber)" Hurdaya Ayır Yeni Kart Tanımla</p>

    @using (Html.BeginForm("ReplaceOrderCard", "Sale", FormMethod.Post))
    {
        <div class="form-group row bg-gray-50 mg-b-5">
            <label for="OrderNumber" class="col-sm-3 col-form-label">Sipariş Numarası</label>
            <div class="col-sm-6">
                <input id="SaleId" name="SaleId" type="hidden" value="@(Model.TicketSaleCreditLoad.SaleID)" />
                <input id="TicketSaleCreditLoadId" name="TicketSaleCreditLoadId" type="hidden" value="@(Model.TicketSaleCreditLoad.ID)" />
                <input id="OrderNumber" name="OrderNumber" type="text" class="form-control" autocomplete="off" placeholder="Sipariş Numarası" value="@(Model.TicketSale.OrderNumber)" readonly>
            </div>
            <div class="col-sm-3"></div>
        </div>

        <div class="form-group row bg-gray-50 mg-b-5">
            <label for="OldCardNumber" class="col-sm-3 col-form-label">Hurda Kart Numarası</label>
            <div class="col-sm-6">
                <input id="CardNumber" name="CardNumber" type="hidden" value="@(Model.TicketSaleCreditLoad.CardNumber)" />
                <input id="OldCardNumber" name="OldCardNumber" type="text" class="form-control font-weight-bold text-danger" autocomplete="off" placeholder="Hurda Kart Numarası" value="@(Model.TicketSaleCreditLoad.CardNumber)" readonly>
            </div>
            <div class="col-sm-3">
                <a href="javascript:;" class="btn btn-xs btn-warning" onclick="GetThisCardDetail('OldCardNumber')">
                    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><g><rect fill="none" height="24" width="24" /><g><path d="M19,5v14H5V5H19 M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3L19,3z" /></g><path d="M14,17H7v-2h7V17z M17,13H7v-2h10V13z M17,9H7V7h10V9z" /></g></svg>
                </a>
            </div>
        </div>

        <div class="form-group row bg-gray-50 mg-b-5">
            <label for="NewCardNumber" class="col-sm-3 col-form-label">Yeni Kart Numarası</label>
            <div class="col-sm-6">
                <input id="NewCardNumber" name="NewCardNumber" type="text" class="form-control font-weight-bold text-primary" autocomplete="off" placeholder="Yeni Kart Numarası" required>
            </div>
            <div class="col-sm-3">
                <a href="javascript:;" class="btn btn-xs btn-warning" onclick="GetThisCardDetail('NewCardNumber')">
                    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><g><rect fill="none" height="24" width="24" /><g><path d="M19,5v14H5V5H19 M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3L19,3z" /></g><path d="M14,17H7v-2h7V17z M17,13H7v-2h10V13z M17,9H7V7h10V9z" /></g></svg>
                </a>
            </div>
        </div>

        <div class="form-group row mg-b-0">
            <div class="col-sm-3"></div>
            <div class="col-sm-6">
                <button type="submit" class="btn btn-primary btn-block">Siparişteki Kartı Değiştir</button>
            </div>
            <div class="col-sm-3"></div>
        </div>
    }


</div>
<script>
    function GetThisCardDetail(inputname) {

        var cardnumber = $('#' + inputname).val();
        var data = new FormData();
        data.append('CardNumber', cardnumber);

        $.ajax({
            url: '@Url.Action("GetCardActions", "Sale")',
            cache: false,
            contentType: false,
            processData: false,
            method: 'POST',
            type: 'POST',
            data: data
        }).done(function (d) {
            $('#CardActionDetail').html(d);
        });
    };
</script>