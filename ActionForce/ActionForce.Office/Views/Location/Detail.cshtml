@model LocationControlModel
@{
    ViewBag.Title = "Lokasyon Detay " + (Model.LocationModel != null ? " - " + Model.LocationModel.LocationName + " " + Model.LocationModel.LocationTypeName : "");
}
@section style{
    <link href="/lib/animate.css/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/dashforge.demo.css">
    <link rel="stylesheet" href="/assets/css/dashforge.css">
    <link rel="stylesheet" href="/assets/css/dashforge.profile.css">
}
<div class="content-header">
    <div class="content-search col-lg">
        <span class="tx-20">Lokasyon Detayı</span>
    </div>
    <nav class="nav">
        @(DateTime.UtcNow.AddHours(Model.Authentication.ActionEmployee.OurCompany.TimeZone.Value).ToLongDateString())
    </nav>
</div>

<div class="content-body">
    <div class="container-fluid pd-x-0 tx-13">
        <div class="media d-lg-flex">
            <div class="profile-sidebar profile-sidebar-two pd-lg-r-15">
                <div class="row">
                    @{Html.RenderPartial("_PartialLocationInformation", Model);}
                    @{Html.RenderPartial("_PartialLocationSideBar", Model);}
                </div><!-- row -->
            </div><!-- profile-sidebar -->
            <div class="media-body mg-t-40 mg-lg-t-0 pd-lg-x-10">
                <div class="profile-update-option bg-white ht-200 d-flex justify-content-end mg-b-20 mg-lg-b-25 rounded">
                    @Html.Raw(Model.LocationModel.MapURL)
                </div>
                <div class="card mg-b-20 mg-lg-b-25">
                    <div class="card-header pd-y-15 pd-x-20 d-flex align-items-center justify-content-between">
                        <h6 class="tx-13 tx-spacing-1 tx-uppercase tx-semibold mg-b-0">@(Model.LocationModel.LocationName + " " + Model.LocationModel.LocationTypeName) - Lokasyon Detayı</h6>
                    </div><!-- card-header -->
                    <div class="card-body pd-20 pd-lg-25">
                        @{Html.RenderPartial("_PartialLocationDetail", Model);}
                    </div>
                    @*<div class="card-footer bg-transparent pd-y-10 pd-sm-y-15 pd-x-10 pd-sm-x-20">
                            <nav class="nav nav-with-icon tx-13">
                                <a href="" class="nav-link"><i data-feather="thumbs-up"></i> Like</a>
                                <a href="" class="nav-link"><i data-feather="message-square"></i> Comment</a>
                                <a href="" class="nav-link"><i data-feather="share"></i> Share</a>
                            </nav>
                        </div>*@<!-- card-footer -->
                </div><!-- card -->
                <div class="card mg-b-20 mg-lg-b-25">
                    <div class="card-header pd-y-15 pd-x-20 d-flex align-items-center justify-content-between">
                        <h6 class="tx-13 tx-spacing-1 tx-uppercase tx-semibold mg-b-0">Schedule (Takvim)</h6>
                    </div><!-- card-header -->
                    <div class="card-body pd-25">
                        @{Html.RenderPartial("_PartialScheduleLocation", Model);}
                    </div>
                </div><!-- card -->
                <div class="card mg-b-20 mg-lg-b-25">
                    <div class="card-header pd-y-15 pd-x-20 d-flex align-items-center justify-content-between">
                        <h6 class="tx-13 tx-spacing-1 tx-uppercase tx-semibold mg-b-0">Shift (Mesai)</h6>
                    </div><!-- card-header -->
                    <div class="card-body pd-25">
                        @{Html.RenderPartial("_PartialShiftLocation", Model);}
                    </div>
                </div><!-- card -->
            </div><!-- media-body -->
            <div class="profile-sidebar profile-sidebar-two mg-t-40 mg-lg-t-0 pd-lg-l-15">
                <div class="row">
                    @if (Model?.LocationPriceLastList?.Count > 0)
                    {
                        <div class="col-sm-6 col-md-5 col-lg">
                            <div class="d-flex align-items-center justify-content-between mg-b-20">
                                <h6 class="tx-13 tx-spacing-1 tx-uppercase tx-semibold mg-b-0">Güncel Fiyat Listesi</h6>
                            </div>
                            <div class="col-12 tx-12 mg-t-10">

                                <h6 class="tx-12 tx-lg-14 tx-medium tx-uppercase tx-spacing-1 mg-b-5 border-bottom mb-2">@($"{Model?.LocationPriceLastList?.FirstOrDefault().TicketTypeName} {Model?.LocationPriceLastList?.FirstOrDefault().CategoryName}")</h6>

                                @foreach (var item in Model.LocationPriceLastList)
                                {
                                <div class="d-flex align-items-center">
                                    <span class="tx-medium mg-l-10">@((item.Unit.ToString()).PadLeft(2, '0'))</span>
                                    <span class="tx-medium mg-l-15">Dakika</span>
                                    <span class="tx-right tx-medium mg-r-0 mg-l-auto">@item.Price @item.Sign</span>
                                </div>
                                }

                            </div>
                        </div>
                    }
                    @if (Model?.EmployeeLocationList?.Count > 0)
                    {
                    <div class="col-sm-6 col-md-5 col-lg  mg-t-40 mg-sm-t-0 mg-lg-t-40">
                        <div class="d-flex align-items-center justify-content-between mg-b-20">
                            <h6 class="tx-13 tx-spacng-1 tx-uppercase tx-semibold mg-b-0">Çalışanlar</h6>
                        </div>
                        <ul class="list-unstyled media-list mg-b-15">
                            @foreach (var item in Model.EmployeeLocationList.OrderByDescending(x => x.Active))
                            {
                                <li class="media align-items-center">
                                    <a href=""><div class="avatar @(item?.Active == true ? "avatar-online" : "avatar-offline")"><span class="avatar-initial rounded-circle bg-dark">@(item.FullName.Substring(0, 1))</span></div></a>
                                    <div class="media-body pd-l-15">
                                        <p class="tx-medium mg-b-0"><a href="/Employee/Detail/@(item.EmployeeUID)" class="link-01">@(item.FullName)</a></p>
                                        <span class="tx-12 tx-color-03">@(item.PositionName)</span>
                                    </div>
                                </li>
                            }
                        </ul>
                    </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
