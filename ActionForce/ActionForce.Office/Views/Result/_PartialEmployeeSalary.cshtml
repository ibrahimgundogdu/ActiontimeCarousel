@model ResultControlModel
@{
    var typeids = Model.CashActionTypes.Where(x => new[] { "SALARYPAY", "SALARYEARN", "LABR" }.Contains(x.Code)).Select(x => x.ID).ToList();

    double? total = 0;
    string currency = "";
}
<div class="table">
    <table class="table table-sm table-hover">
        <thead>
            <tr>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th colspan="7" class="text-center">Hakediş / Maaş - Avans</th>
                <th></th>
                <th></th>
            </tr>
            <tr>
                <th>#</th>
                <th>İşlem</th>
                <th>İşlem Tarihi</th>
                <th>İşlem No</th>

                <th>Çalışan</th>
                <th>Birim</th>
                <th>Saat</th>
                <th>Hakediş</th>
                <th>Maaş / Avans</th>
                <th>Para</th>
                <th>Ödeme</th>

                <th>Detay</th>
                <th>Kayıt</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var sale in Model.EmployeeActions.Where(x => typeids.Contains(x.ActionTypeID.Value)).OrderBy(x => x.RecordDate))
            {
                <tr>
                    <td class="tx-sm-13 bold">@sale.ID</td>
                    <td class="tx-sm-13">@sale.ProcessName</td>
                    <td class="tx-sm-13">@(sale.ProcessDate?.ToShortDateString())</td>
                    <td class="tx-sm-13">
                        @if (sale.ActionTypeID == 32)
                        {
                            <a href="@($"/Salary/Detail/{sale.UID}")" target="_blank" class="">@(sale.ActionDocumentNumber)</a>
                        }
                        else if (sale.ActionTypeID == 31)
                        {
                            <a href="@($"/Salary/SalaryDetail/{sale.UID}")" target="_blank" class="">@(sale.ActionDocumentNumber)</a>
                        }
                    </td>
                    <td class="tx-sm-13">@sale.FullName</td>
                    <td class="tx-sm-13">@(sale.UnitPrice?.ToString("N2"))</td>
                    <td class="tx-sm-13">@(sale.QuantityHour?.ToString("N2"))</td>
                    <td class="tx-sm-13 text-right bg-primary-light font-weight-bold text-danger">@(sale.ActionTypeID == 32 ? sale.Amount?.ToString("N2") : "")</td>
                    <td class="tx-sm-13 text-right bg-primary-light font-weight-bold text-danger">@(sale.ActionTypeID == 31 ? sale.Amount?.ToString("N2") : "")</td>
                    <td class="tx-sm-13">@sale.Currency</td>
                    <td class="tx-sm-13">@(sale.ActionTypeID == 31 && sale.FromCashID > 0 ? "Kasadan" : sale.ActionTypeID == 31 && sale.FromCashID == null ? "Bankadan" : "")</td>
                    <td class="tx-sm-13">@sale.ProcessDetail</td>
                    <td class="tx-sm-13">@sale.RecordDate</td>

                </tr>

                if (sale.FromCashID > 0 && sale.ActionTypeID == 31)
                {
                    total = total + sale.Amount;
                }

                currency = sale.Currency;
            }

        </tbody>
        <tfoot>
            <tr>
                <th colspan="6"></th>
                <th>Toplam</th>
                <th colspan="2" class="text-right bg-light font-weight-bold text-danger">@(total?.ToString("N2"))</th>
                <th>@currency</th>
                <th colspan="3"></th>
            </tr>

        </tfoot>
    </table>
</div>

@if (Model.Result != null) //
{
    <script type="text/javascript">
        $.toast({
            heading: 'Information',
            text: '@Model.Result.Message ',
            showHideTransition: 'slide',
            icon: 'info',
            hideAfter: 5000,
            position: 'bottom-right',
        });
    </script>
}