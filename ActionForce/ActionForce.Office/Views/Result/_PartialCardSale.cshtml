@model ResultControlModel
@{
    var typeids = Model.BankActionTypes.Where(x => new[] { "CRDT", "CRDTR", "CRDTC" }.Contains(x.Code)).Select(x => x.ID).ToList();

    double? total = 0;
}

@if (Model.BankActions != null)
{
    <div class="table">
        <table class="table table-sm table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th colspan="3" class="text-center">Kart</th>
                    <th></th>
                </tr>
                <tr>
                    <th class="wd-5p">#</th>
                    <th class="wd-20p">İşlem</th>
                    <th class="wd-10p">Belge Tarihi</th>
                    <th class="wd-20p">Belge No</th>
                    <th class="text-right">Satış</th>
                    <th class="text-right">İade</th>
                    <th>Para Br.</th>
                    <th>Kayıt</th>
                </tr>
            </thead>
            <tbody>

                @foreach (var sale in Model.BankActions.Where(x => typeids.Contains(x.BankActionTypeID.Value)).OrderByDescending(x => x.RecordDate))
                {
                    <tr>

                        <td class="tx-sm-13 bold">@sale.ID</td>
                        <td class="tx-sm-13">@sale.ProcessName</td>
                        <td class="tx-sm-13">@(sale.ActionDate?.ToShortDateString())</td>
                        <td class="tx-sm-13">@sale.DocumentNumber</td>
                        <td class="tx-sm-13 text-right bg-warning-light font-weight-bold">@(sale.Amount >= 0 ? sale.Amount?.ToString("N2") : "")</td>
                        <td class="tx-sm-13 text-right bg-warning-light font-weight-bold text-danger">@(sale.Amount < 0 ? sale.Amount?.ToString("N2") : "")</td>
                        <td class="tx-sm-13">@sale.Currency</td>
                        <td class="tx-sm-13">@sale.RecordDate</td>

                    </tr>

                    total = total + sale.Amount;
                }


            </tbody>
            <tfoot>
                <tr>
                    <th colspan="3"></th>
                    <th>Toplam</th>
                    <th class="text-right bg-light" colspan="2">@(total?.ToString("N2"))</th>
                    <th>@Model.Authentication.ActionEmployee.OurCompany.Currency</th>
                    <th></th>
                </tr>
            </tfoot>
        </table>
    </div>
}

@if (Model.Result != null) //
{
    <script type="text/javascript">
        $.toast({
            heading: 'Information',
            text: '@Model.Result.Message ',
            showHideTransition: 'slide',
            icon: 'info',
            hideAfter: 5000,
            position: 'bottom-right',
        });
    </script>
}