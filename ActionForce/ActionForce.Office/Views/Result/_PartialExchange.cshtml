@model ResultControlModel
@{
    double? totaltrl = 0;
    string tocurrency = "";
}

@if (Model.Exchanges != null)
{
    <div class="table">
        <table class="table table-sm table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th colspan="5" class="text-center">Döviz</th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <th>#</th>
                    <th>İşlem</th>
                    <th>Belge Tarihi</th>
                    <th>Belge No</th>
                    <th class="text-right">Döviz Tutar</th>
                    <th>Döviz</th>
                    <th class="text-right">Kur</th>
                    <th class="text-right">Satış Tutar</th>
                    <th class="wd-5p">Para</th>
                    <th>Detay</th>
                    <th>Foto</th>
                    <th>Kayıt</th>
                </tr>
            </thead>
            <tbody>

                @foreach (var sale in Model.Exchanges.OrderByDescending(x => x.RecordDate))
                {
                <tr>
                    <td class="tx-sm-13 bold">@sale.ID</td>
                    <td class="tx-sm-13">@sale.ActionTypeName</td>
                    <td class="tx-sm-13">@(sale.Date?.ToShortDateString())</td>
                    <td class="tx-sm-13">
                        @if (sale.Amount >= 0)
                        {
                            <a href="@($"/Cash/ExchangeDetail/{sale.UID}")" target="_blank" class="">@(sale.DocumentNumber)</a>
                        }
                        else
                        {
                            <a href="@($"/Cash/ExchangeDetail/{sale.UID}")" target="_blank" class="">@(sale.DocumentNumber)</a>
                        }

                    </td>
                    <td class="tx-sm-13 text-right bg-primary-light font-weight-bold text-danger">@(sale.Amount >= 0 ? sale.Amount?.ToString("N2") : "")</td>
                    <td class="tx-sm-13 bg-primary-light font-weight-bold">@(sale.Currency)</td>
                    <td class="tx-sm-13 text-right bg-primary-light font-weight-bold  text-danger">@(sale.SaleExchangeRate?.ToString("N2"))</td>
                    <td class="tx-sm-13 text-right bg-primary-light font-weight-bold">@(sale.ToAmount?.ToString("N2"))</td>
                    <td class="tx-sm-13">@sale.ToCurrency</td>
                    <td class="tx-sm-13">@sale.Description</td>
                    <td class="tx-sm-13">
                        <a target="_blank" href="@($"/Document/Exchange/{sale.SlipDocument}")">
                            <img class="thumb" src="@($"/Document/Exchange/{sale.SlipDocument}")" alt="@(sale.SlipDocument)">
                        </a>
                    </td>
                    <td class="tx-sm-13">@sale.RecordDate</td>

                </tr>

                    totaltrl = totaltrl + sale.ToAmount;
                    tocurrency = sale.ToCurrency;
                }
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="3"></th>
                    <th>Toplam</th>
                    <th class="text-right bg-light" colspan="4">@(totaltrl?.ToString("N2"))</th>
                    <th>@tocurrency</th>
                    <th></th>
                </tr>
            </tfoot>
        </table>
    </div>
}

@if (Model.Result != null) //
{
    <script type="text/javascript">
        $.toast({
            heading: 'Information',
            text: '@Model.Result.Message ',
            showHideTransition: 'slide',
            icon: 'info',
            hideAfter: 5000,
            position: 'bottom-right',
        });
    </script>
}